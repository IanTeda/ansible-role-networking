# =============================================================================
# Homepage Docker Compose Configuration
# =============================================================================
#
# This docker-compose.yml file configures Homepage Dashboard in a Docker container.
# Homepage is a modern, fully static, fast, secure, fully proxied, highly customizable
# application dashboard with integrations for various services and applications.
#
# Features:
#   - Modern, fully static dashboard
#   - Fast and secure application dashboard
#   - Highly customizable widgets and layouts
#   - Persistent configuration storage
#
# Requirements:
#   - Docker and docker-compose installed
#   - Port {{ homepage_port }} available
#   - Data directory mounted for persistence
#
# Author: Generated by Ansible
# =============================================================================

services:
  homepage:
    image: {{ homepage_image }}:{{ homepage_image_tag | default('latest') }}
    container_name: {{ homepage_container_name }}
    user: "{{ homepage_user_uid }}:{{ homepage_group_gid }}"
    restart: unless-stopped
    ports:
      - "{{ homepage_port }}:3000"
    env_file:
      - {{ homepage_config_file }}
    volumes:
      - {{ homepage_config_dir }}:/app/config
      - {{ homepage_config_dir }}/images:/app/public/images
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:3000 || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s
    networks:
      - homepage_network

networks:
  homepage_network:
    driver: bridge
    name: homepage_network